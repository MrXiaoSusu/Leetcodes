class Solution {
    public int findKthLargest(int[] nums, int k) {
        int lo = 0;
        int hi = nums.length - 1;
        while (lo < hi) {
            int q = partition(nums, lo, hi);
            if (q > k-1)
                hi = q - 1;
            else if (q < k-1) {
                lo = q + 1;
            }else
                break;
        }
        return nums[k-1];
    }
    
    public int partition(int[] nums,int lo, int hi) {
        int i = lo + 1;
        int j = hi;
        while (true) {
            while (i <= hi && nums[i] > nums[lo]) i++;
            while (j >= lo && nums[j] < nums[lo]) j--;
            if (i >= j)
                break;
            int t = nums[i];
            nums[i] = nums[j];
            nums[j] = t;
            i++;
            j--;
        }
        int t = nums[lo];
        nums[lo] = nums[j];
        nums[j] = t;
        return j;
    }
}
